<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>계산 문제 연습</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<style>
		body {
			background-color: #f8f9fa;
		}
		.container {
			max-width: 400px;
			margin-top: 50px;
		}
		.card {
			border-radius: 1rem;
			box-shadow: 0 0 10px rgba(0,0,0,0.1);
		}
		input[readonly] {
			background-color: #fff !important;
			cursor: default;
		}
		.btn-lg {
			font-size: 1.25rem;
			padding: 0.75rem 0;
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="card p-4">
			<h4 class="text-center mb-4">🧮 계산 문제</h4>
			
			<div class="mb-3">
				<label class="form-label">문제</label>
				<input type="text" id="Q" class="form-control text-end" readonly>
			</div>
			<div class="mb-4">
				<label class="form-label">답란</label>
				<input type="text" id="A" class="form-control text-end" readonly>
			</div>
	
			<div class="row g-2 mb-2">
				<div class="col-3"><button id="seven" class="btn btn-secondary btn-lg w-100">7</button></div>
				<div class="col-3"><button id="eight" class="btn btn-secondary btn-lg w-100">8</button></div>
				<div class="col-3"><button id="nine" class="btn btn-secondary btn-lg w-100">9</button></div>
				<div class="col-3"><button id="newQ" class="btn btn-outline-warning btn-lg w-100">newQ</button></div>
			</div>
			<div class="row g-2 mb-2">
				<div class="col-3"><button id="four" class="btn btn-secondary btn-lg w-100">4</button></div>
				<div class="col-3"><button id="five" class="btn btn-secondary btn-lg w-100">5</button></div>
				<div class="col-3"><button id="six" class="btn btn-secondary btn-lg w-100">6</button></div>
				<div class="col-3"></div>
			</div>
			<div class="row g-2 mb-2">
				<div class="col-3"><button id="one" class="btn btn-secondary btn-lg w-100">1</button></div>
				<div class="col-3"><button id="two" class="btn btn-secondary btn-lg w-100">2</button></div>
				<div class="col-3"><button id="three" class="btn btn-secondary btn-lg w-100">3</button></div>
				<div class="col-3"></div>
			</div>
			<div class="row g-2">
				<div class="col-3"><button id="del" class="btn btn-outline-danger btn-lg w-100">del</button></div>
				<div class="col-3"><button id="zero" class="btn btn-secondary btn-lg w-100">0</button></div>
				<div class="col-3"><button id="minus" class="btn btn-outline-secondary btn-lg w-100">-</button></div>
				<div class="col-3"><button id="submit" class="btn btn-outline-success btn-lg w-100">submit</button></div>
			</div>
		</div>
	</div>

	<script>
		let num1 = Math.floor(Math.random() * 101);
		let num2 = Math.floor(Math.random() * 101);

		let opTypes = ['+', '-'];
		for (let i = 0; i < 100000; i++) {
			let temp = opTypes[0];
			let random = Math.floor(Math.random() * 2);
			opTypes[0] = opTypes[random];
			opTypes[random] = temp;
		}

		document.querySelector('#Q').value = num1 + opTypes[0] + num2;

		let A = '';

		// 0
		document.querySelector('#zero').addEventListener('click', function() {
			A += 0;
			document.querySelector('#A').value = A;
		})

		// 1
		document.querySelector('#one').addEventListener('click', function() {
			A += 1;
			document.querySelector('#A').value = A;
		})

		// 2
		document.querySelector('#two').addEventListener('click', function() {
			A += 2;
			document.querySelector('#A').value = A;
		})

		// 3
		document.querySelector('#three').addEventListener('click', function() {
			A += 3;
			document.querySelector('#A').value = A;
		})

		// 4
		document.querySelector('#four').addEventListener('click', function() {
			A += 4;
			document.querySelector('#A').value = A;
		})

		// 5
		document.querySelector('#five').addEventListener('click', function() {
			A += 5;
			document.querySelector('#A').value = A;
		})

		// 6
		document.querySelector('#six').addEventListener('click', function() {
			A += 6;
			document.querySelector('#A').value = A;
		})

		// 7
		document.querySelector('#seven').addEventListener('click', function() {
			A += 7;
			document.querySelector('#A').value = A;
		})

		// 8
		document.querySelector('#eight').addEventListener('click', function() {
			A += 8;
			document.querySelector('#A').value = A;
		})

		// 9
		document.querySelector('#nine').addEventListener('click', function() {
			A += 9;
			document.querySelector('#A').value = A;
		})

		// -
		document.querySelector('#minus').addEventListener('click', function() {
			if ([ '+', '-' ].includes(A.slice(-1))) {
				alert('연속된 연산자는 사용할 수 없습니다.');
				return;
			}
			A += '-';
			document.querySelector('#A').value = A;
		});

		// del
		document.querySelector('#del').addEventListener('click', function() {
			A = A.slice(0, -1);
			document.querySelector('#A').value = A;
		});

		// newQ
		document.querySelector('#newQ').addEventListener('click', function() {
			num1 = Math.floor(Math.random() * 101);
			num2 = Math.floor(Math.random() * 101);
			for (let i = 0; i < 100000; i++) {
				let temp = opTypes[0];
				let random = Math.floor(Math.random() * 2);
				opTypes[0] = opTypes[random];
				opTypes[random] = temp;
			}
			document.querySelector('#Q').value = num1 + opTypes[0] + num2;
		});

		// submit
		document.querySelector('#submit').addEventListener('click', function() {
			let question = document.querySelector('#Q').value;
			let answer = eval(question);
			let userAnswer = Number(document.querySelector('#A').value);

			if (userAnswer === answer) {
				alert('정답!');
				// 정답 이후 초기화
				document.querySelector('#Q').value = '';
				A = '';
				document.querySelector('#A').value = '';
			} else {
				alert('오답입니다.');
			}
		});
	</script>
</body>
</html>